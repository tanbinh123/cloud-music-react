{"version":3,"sources":["webpack:///./src/application/MV/index.jsx","webpack:///./src/application/MV/style.js"],"names":["Item","MV","props","area","mvList","pullUpLoading","pullDownLoading","count","hasMore","offset","limit","history","getMvListDispatch","changeLoadingDispatch","changePullUpLoadingDispatch","setOffsetDispatch","getMvLoadingMoreDispatch","useEffect","handlePullUp","useCallback","handlePullDown","map","item","push","id","name","playCount","cover","renderRoutes","route","routes","mapStateToProps","state","getIn","mapStateToDispatch","dispatch","getMvList","data","changeLoading","changePullUpLoding","getMvLoadingMore","setOffset","connect","React","memo","ListContainer","styled","div","play"],"mappings":"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","file":"10-b12a0dff0e3b7059f588.js","sourcesContent":["import React, { useCallback, useEffect } from 'react'\nimport { connect } from \"react-redux\"\nimport { List, Button } from \"antd-mobile\"\nimport { ListContainer } from \"./style\"\nimport { getMvList, changeLoading, changePullUpLoding, getMvLoadingMore, setOffset } from \"./store/actionCreator\"\nimport {renderRoutes} from \"react-router-config\"\nimport Scroll from \"baseUI/scroll\"\n\nconst Item = List.Item\n/**\n * 推荐MV的组件\n * @returns \n */\nfunction MV(props) {\n\n    const { area, mvList, pullUpLoading, pullDownLoading, count, hasMore, offset, limit, history } = props\n    const { getMvListDispatch, changeLoadingDispatch, changePullUpLoadingDispatch, setOffsetDispatch, getMvLoadingMoreDispatch } = props;\n    useEffect(() => {\n        getMvListDispatch(area)\n    }, [])\n    /**\n     * 上拉\n     */\n    const handlePullUp = useCallback(() => {\n\n        if (!pullUpLoading) {\n\n            setOffsetDispatch(offset + limit)\n            changePullUpLoadingDispatch(true)\n            getMvLoadingMoreDispatch(area, offset + limit, limit)\n        }\n\n    })\n    /**\n     * 下拉\n     */\n    const handlePullDown = useCallback(() => {\n        setOffsetDispatch(0)\n        changeLoadingDispatch(true)\n        getMvListDispatch(area)\n    })\n    return (\n        <>\n        <ListContainer>\n            <Scroll\n                pullUp={handlePullUp}\n                pullDown={handlePullDown}\n                pullDownLoading={pullDownLoading}\n            >\n                <List className=\"mvList\" renderHeader={() => area}>\n                    {\n                        mvList.map(item => {\n                            return (\n                                <Item\n                                onClick={() => {\n                                    history.push(`/mv/${item.id}`)\n                                }}\n                                    arrow=\"horizontal\"\n                                    wrap={true}\n                                    multipleLine={true}\n                                    extra={\n                                        <div className=\"mvInfo\">\n\n                                            <span className=\"name\">{item.name}</span>\n                                        </div>\n                                    }\n                                    thumb={\n                                        <div className=\"img_wrapper\">\n                                            <span className=\"playCount\">\n                                                <i className=\"iconfont play\">&#xe885;</i>\n                                                <span>{item.playCount}</span>\n                                            </span>\n                                            <img src={item.cover} alt=\"\" />\n                                        </div>\n                                    }\n                                    key={item.id}>\n\n                                </Item>\n                            )\n                        })\n                    }\n\n                    {\n                        hasMore ? <Button onClick={handlePullUp} activeStyle={false} loading={pullUpLoading} className=\"moreBtn\" size=\"small\" inline type=\"primary\">加载更多</Button> : \"\"\n\n                    }\n                </List>\n            </Scroll>\n        </ListContainer>\n        {renderRoutes(props.route.routes)}\n        </>\n    )\n}\nconst mapStateToProps = state => ({\n    area: state.getIn([\"mv\", \"area\"]),\n    mvList: state.getIn([\"mv\", \"mvList\"]),\n    pullDownLoading: state.getIn([\"mv\", \"pullDownLoading\"]),\n    pullUpLoading: state.getIn([\"mv\", \"pullUpLoading\"]),\n    hasMore: state.getIn([\"mv\", \"hasMore\"]),\n    count: state.getIn([\"mv\", \"count\"]),\n    offset: state.getIn([\"mv\", \"offset\"]),\n    limit: state.getIn([\"mv\", \"limit\"])\n})\nconst mapStateToDispatch = (dispatch) => ({\n    getMvListDispatch(area) {\n        dispatch(getMvList(area))\n    },\n    // 改变下拉刷新列表数据\n    changeLoadingDispatch(data) {\n        dispatch(changeLoading(data))\n    },\n    changePullUpLoadingDispatch(data) {\n        dispatch(changePullUpLoding(data))\n    },\n    getMvLoadingMoreDispatch(area, offset, limit) {\n        dispatch(getMvLoadingMore(area, offset, limit))\n    },\n    setOffsetDispatch(offset) {\n        dispatch(setOffset(offset))\n    }\n})\n\nexport default connect(mapStateToProps, mapStateToDispatch)(React.memo(MV))\n","import styled from \"styled-components\"\n\nexport const ListContainer = styled.div`\n  position: fixed;\n  top: .94rem;\n  bottom: ${props => props.play > 0 ? \".6rem\" : 0};\n  width: 100%;\n  .mvList{\n      .am-list-body{\n        padding-top: .2rem;\n        padding-bottom: .2rem;\n      }\n  }\n  .img_wrapper{\n      position: relative;\n      .playCount {\n        color:#ddd;\n        font-size: 14px;\n        display:flex;\n        align-items: center;\n        position: absolute;\n        bottom: .05rem;\n        right: .05rem;\n    }\n\n  }\n.am-list-item{\n    padding-bottom: .2rem;\n    &:nth-last-of-type(1){\n        padding-bottom: 0;\n    }\n}\n.am-list-item img {\n    width: 1.8rem;\n    height: auto;\n}\n.am-list-extra{\n    flex: 1;\n}\n.mvInfo{\n    width: 100%;\n    display:flex;\n    flex-direction: column;\n    align-items: flex-start;\n    justify-content: flex-start;\n    text-align: left;\n    \n    .name {\n        font-size: 14px;\n        color: #333;\n    }\n}\n.moreBtn{\n    position: relative;\n    left: 50%;\n    transform: translateX(-50%);\n    width: 1.2rem;\n    top: .12rem;\n    background: #d44439;\n}\n`"],"sourceRoot":""}